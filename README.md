# Lucrasoft.Creatio

An API for Creatio CRM Bundle (Sales, Marketing, ..) in .NET Core.

It uses the OData4 endpoint of your Creatio environment. 
The typed classes are generated by the OData Connected Service.
The client api is based on OData Client V7 , see https://docs.microsoft.com/en-us/odata/client/basic-crud-operations


## Sample usages

Get the DefaultContainer (see microsoft odata client documentation for more info about the defaultcontainer)

``` csharp
var client = CreatioClient("your-base-url.creatio.com");

if (client.LoginUserPass("username","password")) {

	var context = client.GetContainer();
}
```

Query the Accounts table.
``` csharp
var accounts = context.Accounts
				.Where(x=>x.SomeProperty=="")

```

Update a single record
``` csharp
var account = context.Contact.ByKey( "12").GetValue();

account.Name = "Contoso Company";

context.UpdateObject(account);
context.SaveChanges();
```

For more information see https://docs.microsoft.com/en-us/odata/client/getting-started

### Regenerated code.

In case you need custom fields, you can clone this library, regenerated the "Connected Service".

Because the Odata endpoint of your Creatio is protected, you should not regenerate from the URL directly, but first download (after authentication) the metadata xml file yourself.

Go to <baseUrl>0/odata/$metadata
Download and save this into a xml file.
Use this XML file as the 'source' for the code-generator / connected service.


### More information

- https://academy.creatio.com/docs/developer/integrations_and_api/data_services/odata